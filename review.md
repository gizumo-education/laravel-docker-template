# Laravel Lesson レビュー①

## Todo一覧機能

### Todoモデルのallメソッドで実行しているSQLは何か
SELECT * FROM todo
### Todoモデルのallメソッドの返り値は何か
Collectionインスタンス
### 配列の代わりにCollectionクラスを使用するメリットは
DBから受け取った配列に加え、その配列に対するさまざまなメソッドが定義されているから。
=配列にできてCollectionインスタンスにできないことはない=
### view関数の第1・第2引数の指定と何をしているか
第1引数では、クライアントに表示させたいbladeファイルを指定します。
第2引数では、第1引数のbladeファイル内にあるデータを渡す先の変数と、代入したい値を連想配列の形で指定します。
### index.blade.phpの$todoList・$todoに代入されているものは何か
 $todosにはallメソッドの返り値(Collectionインスタンス)が格納されている
 $todoには、Todoモデルのインスタンスが格納されています。
 レコードの各行それぞれがTodoモデルインスタンスとして格納され、それがまとまったcollectionインスタンスが$todosに格納されています。
## Todo作成機能

### Requestクラスのallメソッドは何をしているか
create.bladeからpostされた値の全てを取得します。
### fillメソッドは何をしているか
Todoモデルのインスタンスのプロパティに取得した値を代入します。
### $fillableは何のために設定しているか
fillメソッドにて一括で代入する際に、fillする値に制限をかけることで、デベロッパーツールでpostメソッドを改変され意図しない値が代入されることを防ぐ
### saveメソッドで実行しているSQLは何か
INSERT文。(プライマリキーがnullの状態など、新規の作成の時のみ。プライマルキーがすでに存在しているレコードに対してsql文を実行する場合はUPDATE文を実行するよう定義されている)
### redirect()->route()は何をしているか
route()の引数に指定したルートを実行し、ルートで指定されたbladeファイルにリダイレクトします。
### RequestクラスからFormRequestクラスに変更した理由
(やってないけどたぶん)バリデーションを適用するため。FormRequestクラスでは、バリデーションを適用するためのメソッドが定義されているため、正しく活用することでバリデーションを実装することができる。
### $errorsのhasメソッドの引数・返り値は何か

### $errorsのfirstメソッドの引数・返り値は何か

## その他

### テーブル構成をマイグレーションファイルで管理するメリット
SQL文を何度も実行しなくても、マイグレーションファイルを編集するのみでテーブルを編集することができるため、保守性が高い。
またSQL文をいちいち実行してテーブルを見に行かなくても、マイグレーションファイルを見ればDB構成が確認できるため可読性も確保できる。
### マイグレーションファイルのup()、down()は何のコマンドを実行した時に呼び出されるのか
どちらもappコンテナ内に入って実効する
up() → php artisan migrate
down() → php artisan migrate:rollback
### Seederクラスの役割は何か
マイグレーションファイルで作成したDBにテストデータを挿入できる。
これによって、Dev環境でのDBレコード呼び出しなどをSQL文を挿入してからテストする必要がなく、テストの効率が上がる。
### TodoControllerクラスのコンストラクタはどのタイミングで実行されるか
TodoControllerクラスがインスタンス化された時
### route関数の引数・返り値・使用するメリット
route関数は第1引数にURIがどれかを識別し、またRoute::getのようにどのHTTPメソッドでリクエストが来ているかの組み合わせによって、第2引数の関数またはControllerのメソッドを実行する。
ルートによってマイグレーションファイルへのリダイレクトを少量のコードで記述することができ、またルートごとに名前をつけられるので同じルート処理であればreturn view('ルート名')で簡単にルートを実行できる
さらに、ルートはルートファイルに一つにまとめるため、ルートの変更をしたいときにもルートファイルの編集のみで実装できるので保守性に優れる
### @extends・@section・@yieldの関係性とbladeを分割するメリット
@exteds()の引数に親ブレードファイルの指定
@section()～@endsectionまでが親ブレードに挿入される部分。
sectionの引数には口述する@yieldと同じ引数にすることで紐づけられる

@yield()は親ブレード側に記述する子ブレードを挿入したい部分
引数の値を子ブレードの@section()の引数と同じにすることで紐づけられる。

それぞれはブレードファイルの共通部分をひとつのブレードファイルに纏めて親ブレードとし、変更する部分のみ子ブレードで作成して親ブレードにはめ込む事でひとつのページを読み込む。
例えば、ヘッダーやフッターなどのWEBapp全体で共通するレイアウトを親ブレードに纏めることで、何度も同じコードを書かずに済み、またレイアウトの変更が必要になった場合も親ブレードのみ変更するので保守性が高い

親ブレードはview/layouts/に置く。
### @csrfは何のための記述か
フォームの中に記述を行うことで、CSRF対策が5文字で可能になる。
またLaravelにはセーフティとしてフォームにCSRF対策を行っていない場合無効のリクエストとなり419エラーが発生する。
### {{ }}とは
単なるPHPの処理を行う際に、波かっこの中にPHPのコードを記述することでPHPを実行出来る。